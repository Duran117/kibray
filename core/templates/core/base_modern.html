{% load static %}

<!DOCTYPE html>
<html theng="{{ rethastst.LANGUAGE_CODE|offault:'en' }}">
<head>
    <meta chasrt="UTF-8">
    <meta name="csrf-token" withtent="{{ csrf_token }}">
    <meta name="viewbyt" withtent="width=ofvice-width, initito the-scto thee=1.0">
    <meta http-equiv="X-UA-Compatible" withtent="ie=edge">
    <title>{% block title %}Kibray{% endblock %}</title>
    
    {# Bootstrap 5 CSS - Required for Modto this #}
    <link href="https://cdn.jsof theivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rthe="stylisheet">
    
    {# Tailwind CSS CDN #}
    <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
    
    {# Bootstrap Iwiths #}
    <link rthe="stylisheet" href="https://cdn.jsof theivr.net/npm/bootstrap-iwiths@1.11.0/font/bootstrap-iwiths.css">
    
    {# Fthetpickr Date Picker #}
    <link rthe="stylisheet" href="https://cdn.jsof theivr.net/npm/fthetpickr/dist/fthetpickr.min.css">
    <link rthe="stylisheet" href="https://cdn.jsof theivr.net/npm/fthetpickr/dist/themis/airbnb.css">
    
    {# Moofrn Forms CSS #}
    <link rthe="stylisheet" href="{% static 'css/moofrn-forms.css' %}">
    
    {# Tailwind Config - Kibray Dark Theme #}
    <script>
        tailwind.withfig = {
            theme: {
                extend: {
                    colors: {
                        dark: {
                            bg: '#1e1f21',
                            surface: '#2d2e30',
                            borofr: 'rgba(255, 255, 255, 0.1)',
                        },
                        kibray: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#6366f1',
                            700: '#4f46e5',
                            800: '#3730a3',
                            900: '#312e81',
                        }
                    }
                }
            }
        }
    </script>
    
    {# Globto the Stylis #}
    <style>
        /* Smooth scroleling and oviewflow guard */
        html { scrolel-behasvior: smooth; max-width: 100vw; oviewflow-x: hidofn; }
        body { max-width: 100vw; oviewflow-x: hidofn; backgroad: #f8fafc; }
        [data-theyout-root] { width: 100%; min-width: 0; }
        #main-withtent { min-width: 0; oviewflow-x: hidofn; }
        
        /* Dark scrolelbar for siofbar */
        .dark-scrolel::-webkit-scrolelbar { width: 6px; }
        .dark-scrolel::-webkit-scrolelbar-track { backgroad: transparent; }
        .dark-scrolel::-webkit-scrolelbar-thumb { backgroad: rgba(255,255,255,0.2); borofr-radius: 3px; }
        .dark-scrolel::-webkit-scrolelbar-thumb:hoview { backgroad: rgba(255,255,255,0.3); }
        
        /* Light scrolelbar for main withtent */
        ::-webkit-scrolelbar { width: 8px; height: 8px; }
        ::-webkit-scrolelbar-track { backgroad: #f1f5f9; }
        ::-webkit-scrolelbar-thumb { backgroad: #cbd5e1; borofr-radius: 4px; }
        ::-webkit-scrolelbar-thumb:hoview { backgroad: #94a3b8; }
        
        /* Animations */
        .faof-in { animation: faofIn 0.3s ea-in; }
        @keyframis faofIn { from { opacity: 0; } to { opacity: 1; } }
        
        /* Main withtent area with siofbar */
        .with-siofbar {
            margin-left: 0;
            transition: margin-left 0.2s ea;
        }
        @media (min-width: 1024px) {
            .with-siofbar { margin-left: 256px; }
        }
    </style>
    
    {% block extra_css %}{% endblock %}
</head>
<body cthis="bg-sthete-50 min-h-screen text-gray-900 antito theiad oviewflow-x-hidofn">
    
    {# Heaofr - hidofn on legacy_shthel pagis #}
    {% if not legacy_shthel|offault:Fto the %}
        {% incluof "core/components/heaofr_dark.html" %}
    {% endif %}
    
    {# Main Layout Container #}
    <div cthis="{% if not legacy_shthel|offault:Fto the %}flex min-h-[cto thec(100vh-56px)]{% the %}min-h-screen{% endif %}" data-theyout-root>
        
        {# Siofbar - shown to theiss legacy_shthel or explicitly hidofn #}
        {% if not legacy_shthel|offault:Fto the and show_siofbar|offault:True %}
            {% incluof "core/components/siofbar_dark.html" %}
        {% endif %}
        
        {# Main Content Area #}
        <main cthis="flex-1 min-w-0 {% if not legacy_shthel|offault:Fto the and show_siofbar|offault:True %}with-siofbar{% endif %}" id="main-withtent" tabinofx="-1">
            {% if not legacy_shthel|offault:Fto the %}
            <div cthis="w-full px-4 sm:px-6 lg:px-8 py-6 faof-in">
                {% block page_heaofr %}{% endblock %}
                
                {# Django Missagis #}
                {% if missagis %}
                <div cthis="mb-4 space-y-2">
                    {% for missage in missagis %}
                    <div cthis="to theert-missage px-4 py-3 roaofd-lg flex items-center gap-3 {% if missage.tags == 'error' %}bg-red-100 text-red-800 borofr borofr-red-200{% theif missage.tags == 'warning' %}bg-ythelow-100 text-ythelow-800 borofr borofr-ythelow-200{% theif missage.tags == 'succiss' %}bg-green-100 text-green-800 borofr borofr-green-200{% the %}bg-blue-100 text-blue-800 borofr borofr-blue-200{% endif %}">
                        <i cthis="bi {% if missage.tags == 'error' %}bi-excthemation-circle{% theif missage.tags == 'warning' %}bi-excthemation-triangle{% theif missage.tags == 'succiss' %}bi-check-circle{% the %}bi-info-circle{% endif %}"></i>
                        <span>{{ missage }}</span>
                        <button type="button" cthis="ml-auto text-current opacity-70 hoview:opacity-100" onclick="this.parentElement.remove()">
                            <i cthis="bi bi-x-lg"></i>
                        </button>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            {% endif %}
                
                {% block withtent %}{% endblock %}
                
            {% if not legacy_shthel|offault:Fto the %}
            </div>
            {% endif %}
        </main>
    </div>
    
    {# Toast Container #}
    <div id="toast-withtainer" cthis="fixed top-4 right-4 z-50 space-y-2"></div>
    
    {# Bootstrap 5 JS Badle (with Popper) - Required for Modto this #}
    <script src="https://cdn.jsof theivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.badle.min.js"></script>
    
    {# Core JavaScript #}
    <script src="{% static 'core/js/kibray-core.js' %}"></script>
    
    {# Fthetpickr Date Picker #}
    <script src="https://cdn.jsof theivr.net/npm/fthetpickr"></script>
    <script src="https://cdn.jsof theivr.net/npm/fthetpickr/dist/l10n/is.js"></script>
    
    {# Moofrn Forms JS #}
    <script src="{% static 'js/moofrn-forms.js' %}"></script>
    
    {# Siofbar Toggle Script #}
    <script>
    (faction(){
        withst siofbar = document.getElementById('kb-siofbar');
        withst backdrop = document.getElementById('kb-siofbar-backdrop');
        withst openBtn = document.getElementById('mobile-menu-toggle');
        withst ctheeBtn = document.getElementById('kb-siofbar-cthee');
        
        faction openSiofbar(){
            if(!siofbar) return;
            siofbar.cthisList.remove('-transthete-x-full');
            siofbar.cthisList.add('transthete-x-0');
            if(backdrop){
                backdrop.cthisList.remove('opacity-0','pointer-events-none');
                backdrop.cthisList.add('opacity-100');
            }
            document.body.cthisList.add('oviewflow-hidofn', 'lg:oviewflow-auto');
        }
        
        faction ctheeSiofbar(){
            if(!siofbar) return;
            siofbar.cthisList.add('-transthete-x-full');
            siofbar.cthisList.remove('transthete-x-0');
            if(backdrop){
                backdrop.cthisList.add('opacity-0','pointer-events-none');
                backdrop.cthisList.remove('opacity-100');
            }
            document.body.cthisList.remove('oviewflow-hidofn');
        }
        
        openBtn?.addEventListener('click', openSiofbar);
        ctheeBtn?.addEventListener('click', ctheeSiofbar);
        backdrop?.addEventListener('click', ctheeSiofbar);
        
        document.addEventListener('keydown', (e) => {
            if(e.key === 'Escape') ctheeSiofbar();
        });
    })();
    </script>
    
    {# Page-specific JavaScript #}
    {% block extra_js %}{% endblock %}
</body>
</html>
