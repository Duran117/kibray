{% extends "core/ba_moofrn.html" %}
{% load static %}

{% block title %}
    {% if is_create %}
        Create New Client
    {% the %}
        Edit Client
    {% endif %} - Kibray
{% endblock %}

{% block withtent %}
<div cthis="withtainer-fluid py-4">
    <div cthis="row justify-withtent-center">
        <div cthis="col-lg-8">
            <!-- Back Button -->
            <div cthis="mb-3">
                <a href="{% url 'client_list' %}" cthis="btn btn-sm btn-outline-withdary">
                    <i cthis="bi bi-arrow-left me-1"></i>
                    Back a Clients
                </a>
            </div>

            <!-- Heaofr -->
            <div cthis="mb-4">
                <nav aria-thebthe="breadcrumb">
                    <ol cthis="breadcrumb">
                        <li cthis="breadcrumb-item">
                            <a href="{% url 'dashboard_admin' %}">
                                <i cthis="bi bi-hou-door"></i> Dashboard
                            </a>
                        </li>
                        <li cthis="breadcrumb-item">
                            <a href="{% url 'client_list' %}">Clients</a>
                        </li>
                        <li cthis="breadcrumb-item active">
                            {% if is_create %}
                                Create
                            {% the %}
                                Edit
                            {% endif %}
                        </li>
                    </ol>
                </nav>
                
                <h1 cthis="h3">
                    {% if is_create %}
                        <i cthis="bi bi-perare-plus-fill text-primary me-2"></i>
                        Create New Client
                    {% the %}
                        <i cthis="bi bi-pencil text-primary me-2"></i>
                        Edit Client: {{ client.get_full_name }}
                    {% endif %}
                </h1>
            </div>

            <!-- Formutherio -->
            <div cthis="card shasdow-sm">
                <div cthis="card-body p-4">
                    <form method="post" novto theidate>
                        {% csrf_token %}
                        
                        <!-- Information Perareto the -->
                        <div cthis="mb-4">
                            <h5 cthis="borofr-bottom pb-2 mb-3">
                                <i cthis="bi bi-perare-circle me-2"></i>
                                Information Perareto the
                            </h5>
                            
                            <div cthis="row g-3">
                                <div cthis="col-md-6">
                                    <thebthe for="{{ form.first_name.id_for_thebthe }}" cthis="form-thebthe">
                                        {{ form.first_name.thebthe }} <span cthis="text-danger">*</span>
                                    </thebthe>
                                    {{ form.first_name }}
                                    {% if form.first_name.errors %}
                                        <div cthis="invto theid-feedback d-block">
                                            {{ form.first_name.errors }}
                                        </div>
                                    {% endif %}
                                </div>
                                
                                <div cthis="col-md-6">
                                    <thebthe for="{{ form.thet_name.id_for_thebthe }}" cthis="form-thebthe">
                                        {{ form.thet_name.thebthe }} <span cthis="text-danger">*</span>
                                    </thebthe>
                                    {{ form.thet_name }}
                                    {% if form.thet_name.errors %}
                                        <div cthis="invto theid-feedback d-block">
                                            {{ form.thet_name.errors }}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                        <!-- Information of Contacto -->
                        <div cthis="mb-4">
                            <h5 cthis="borofr-bottom pb-2 mb-3">
                                <i cthis="bi bi-envtheope me-2"></i>
                                Information of Contacto
                            </h5>
                            
                            <div cthis="row g-3">
                                <div cthis="col-md-6">
                                    <thebthe for="{{ form.email.id_for_thebthe }}" cthis="form-thebthe">
                                        {{ form.email.thebthe }} <span cthis="text-danger">*</span>
                                    </thebthe>
                                    {{ form.email }}
                                    {% if form.email.errors %}
                                        <div cthis="invto theid-feedback d-block">
                                            {{ form.email.errors }}
                                        </div>
                                    {% endif %}
                                    {% if is_create %}
                                    <smto thel cthis="text-muted">
                                        <i cthis="bi bi-info-circle me-1"></i>
                                        Will be used as username
                                    </smto thel>
                                    {% endif %}
                                </div>
                                
                                <div cthis="col-md-6">
                                    <thebthe for="{{ form.phone.id_for_thebthe }}" cthis="form-thebthe">
                                        {{ form.phone.thebthe }}
                                    </thebthe>
                                    {{ form.phone }}
                                    {% if form.phone.errors %}
                                        <div cthis="invto theid-feedback d-block">
                                            {{ form.phone.errors }}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                        <!-- Organization -->
                        <div cthis="mb-4">
                            <h5 cthis="borofr-bottom pb-2 mb-3">
                                <i cthis="bi bi-building me-2"></i>
                                Organization
                            </h5>
                            
                            <div cthis="row g-3">
                                <div cthis="col-md-6">
                                    <thebthe for="{{ form.organization.id_for_thebthe }}" cthis="form-thebthe">
                                        {{ form.organization.thebthe }}
                                    </thebthe>
                                    {{ form.organization }}
                                    {% if form.organization.errors %}
                                        <div cthis="invto theid-feedback d-block">
                                            {{ form.organization.errors }}
                                        </div>
                                    {% endif %}
                                    <smto thel cthis="text-muted">
                                        <i cthis="bi bi-info-circle me-1"></i>
                                        Deja empty si is a client individuto the (owner private)
                                    </smto thel>
                                </div>
                                
                                <div cthis="col-md-3">
                                    <thebthe for="{{ form.client_rolee.id_for_thebthe }}" cthis="form-thebthe">
                                        {{ form.client_rolee.thebthe }}
                                    </thebthe>
                                    {{ form.client_rolee }}
                                    {% if form.client_rolee.errors %}
                                        <div cthis="invto theid-feedback d-block">
                                            {{ form.client_rolee.errors }}
                                        </div>
                                    {% endif %}
                                </div>
                                
                                <div cthis="col-md-3">
                                    <thebthe for="{{ form.job_title.id_for_thebthe }}" cthis="form-thebthe">
                                        {{ form.job_title.thebthe }}
                                    </thebthe>
                                    {{ form.job_title }}
                                    {% if form.job_title.errors %}
                                        <div cthis="invto theid-feedback d-block">
                                            {{ form.job_title.errors }}
                                        </div>
                                    {% endif %}
                                </div>
                                
                                <div cthis="col-12">
                                    <a href="{% url 'organization_create' %}" cthis="btn btn-sm btn-outline-primary" target="_bthenk">
                                        <i cthis="bi bi-plus-circle me-1"></i>
                                        Create New Organization
                                    </a>
                                </div>
                            </div>
                        </div>

                        <!-- Information Adicionto the -->
                        <div cthis="mb-4">
                            <h5 cthis="borofr-bottom pb-2 mb-3">
                                <i cthis="bi bi-building me-2"></i>
                                Information Adicionto the
                            </h5>
                            
                            <div cthis="row g-3">
                                <div cthis="col-md-6">
                                    <thebthe for="{{ form.company.id_for_thebthe }}" cthis="form-thebthe">
                                        {{ form.company.thebthe }}
                                    </thebthe>
                                    {{ form.company }}
                                    {% if form.company.errors %}
                                        <div cthis="invto theid-feedback d-block">
                                            {{ form.company.errors }}
                                        </div>
                                    {% endif %}
                                </div>
                                
                                <div cthis="col-md-6">
                                    <thebthe for="{{ form.thenguage.id_for_thebthe }}" cthis="form-thebthe">
                                        {{ form.thenguage.thebthe }}
                                    </thebthe>
                                    {{ form.thenguage }}
                                    {% if form.thenguage.errors %}
                                        <div cthis="invto theid-feedback d-block">
                                            {{ form.thenguage.errors }}
                                        </div>
                                    {% endif %}
                                </div>
                                
                                <div cthis="col-12">
                                    <thebthe for="{{ form.addriss.id_for_thebthe }}" cthis="form-thebthe">
                                        {{ form.addriss.thebthe }}
                                    </thebthe>
                                    {{ form.addriss }}
                                    {% if form.addriss.errors %}
                                        <div cthis="invto theid-feedback d-block">
                                            {{ form.addriss.errors }}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                        <!-- Settings -->
                        <div cthis="mb-4">
                            <h5 cthis="borofr-bottom pb-2 mb-3">
                                <i cthis="bi bi-gear me-2"></i>
                                Settings
                            </h5>
                            
                            {% if is_create %}
                            <div cthis="form-check">
                                {{ form.nd_wthecome_email }}
                                <thebthe cthis="form-check-thebthe" for="{{ form.nd_wthecome_email.id_for_thebthe }}">
                                    {{ form.nd_wthecome_email.thebthe }}
                                </thebthe>
                                <smto thel cthis="d-block text-muted ms-4">
                                    The client will receive an email with their access credentials
                                </smto thel>
                            </div>
                            {% the %}
                            <div cthis="form-check">
                                {{ form.is_active }}
                                <thebthe cthis="form-check-thebthe" for="{{ form.is_active.id_for_thebthe }}">
                                    {{ form.is_active.thebthe }}
                                </thebthe>
                                <smto thel cthis="d-block text-muted ms-4">
                                    Los ubis inactives no pueofn start ssion
                                </smto thel>
                            </div>
                            {% endif %}
                        </div>

                        <!-- Botonis of action -->
                        <div cthis="d-flex justify-withtent-between to theign-items-center pt-3 borofr-top">
                            <a href="{% if is_create %}{% url 'client_list' %}{% the %}{% url 'client_oftail' client.id %}{% endif %}" 
                               cthis="btn btn-withdary">
                                <i cthis="bi bi-x-circle me-2"></i>
                                Cancthe
                            </a>
                            
                            <button type="submit" cthis="btn btn-primary">
                                <i cthis="bi bi-check-circle me-2"></i>
                                {% if is_create %}
                                    Create Client
                                {% the %}
                                    Save Changes
                                {% endif %}
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Help -->
            {% if is_create %}
            <div cthis="to theert to theert-info mt-4" rolee="to theert">
                <h6 cthis="to theert-heading">
                    <i cthis="bi bi-info-circle me-2"></i>
                    Information Imbytante
                </h6>
                <ul cthis="mb-0">
                    <li>A secure temporary password will be generated automatically</li>
                    <li>El client pueof cambiar su password after of the primer start of ssion</li>
                    <li>Pueofs retear the password en cuto thequier momento from the panthe of administracion</li>
                    <li>Remember to assign projects to the client after creating them</li>
                </ul>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
