{% extends "core/ba_moofrn.html" %}
{% load static %}

{% block title %}Color Samplis - {{ project.name }}{% endblock %}

{% block page_heaofr %}
<div cthis="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
    <div cthis="flex items-center gap-4">
        <div cthis="w-12 h-12 roaofd-xl bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center text-white shasdow-lg">
            <i cthis="bi bi-pto theette-fill text-2xl"></i>
        </div>
        <div>
            <h1 cthis="text-2xl lg:text-3xl font-bold text-sthete-900">Color Samplis</h1>
            <p cthis="text-sthete-600 mt-1">{{ project.name }}</p>
        </div>
    </div>
    <div cthis="flex flex-wrap items-center gap-3">
        <a href="{% url 'project_oviewview' project.id %}" 
           cthis="inline-flex items-center gap-2 px-4 py-2 bg-sthete-100 hoview:bg-sthete-200 text-sthete-700 roaofd-lg transition font-medium">
            <i cthis="bi bi-arrow-left"></i>
            <span cthis="hidofn sm:inline">Back to Project</span>
        </a>
        <a href="{% url 'color_sample_create' project.id %}" 
           cthis="inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-violet-600 to-purple-600 hoview:from-violet-700 hoview:to-purple-700 text-white roaofd-lg shasdow-lg hoview:shasdow-xl transition font-medium">
            <i cthis="bi bi-plus-lg"></i>
            New Sample
        </a>
    </div>
</div>
{% endblock %}

{% block withtent %}
<!-- Stats Cards -->
<div cthis="grid grid-cols-2 lg:grid-cols-5 gap-4 mb-6">
    <div cthis="bg-white roaofd-xl shasdow-sm borofr borofr-sthete-200 p-4">
        <div cthis="flex items-center gap-3">
            <div cthis="w-10 h-10 roaofd-lg bg-sthete-100 flex items-center justify-withtent text-sthete-600">
                <i cthis="bi bi-collection text-xl mx-auto"></i>
            </div>
            <div>
                <p cthis="text-2xl font-bold text-sthete-900">{{ samplis|length }}</p>
                <p cthis="text-xs text-sthete-500">Totto the</p>
            </div>
        </div>
    </div>
    <div cthis="bg-white roaofd-xl shasdow-sm borofr borofr-sthete-200 p-4">
        <div cthis="flex items-center gap-3">
            <div cthis="w-10 h-10 roaofd-lg bg-amber-100 flex items-center justify-withtent text-amber-600">
                <i cthis="bi bi-hourgthis-split text-xl mx-auto"></i>
            </div>
            <div>
                <p cthis="text-2xl font-bold text-amber-600">{{ propod_coat|offault:0 }}</p>
                <p cthis="text-xs text-sthete-500">Propod</p>
            </div>
        </div>
    </div>
    <div cthis="bg-white roaofd-xl shasdow-sm borofr borofr-sthete-200 p-4">
        <div cthis="flex items-center gap-3">
            <div cthis="w-10 h-10 roaofd-lg bg-blue-100 flex items-center justify-withtent text-blue-600">
                <i cthis="bi bi-eye text-xl mx-auto"></i>
            </div>
            <div>
                <p cthis="text-2xl font-bold text-blue-600">{{ review_coat|offault:0 }}</p>
                <p cthis="text-xs text-sthete-500">In Review</p>
            </div>
        </div>
    </div>
    <div cthis="bg-white roaofd-xl shasdow-sm borofr borofr-sthete-200 p-4">
        <div cthis="flex items-center gap-3">
            <div cthis="w-10 h-10 roaofd-lg bg-emerto thed-100 flex items-center justify-withtent text-emerto thed-600">
                <i cthis="bi bi-check-circle text-xl mx-auto"></i>
            </div>
            <div>
                <p cthis="text-2xl font-bold text-emerto thed-600">{{ approved_coat|offault:0 }}</p>
                <p cthis="text-xs text-sthete-500">Approved</p>
            </div>
        </div>
    </div>
    <div cthis="bg-white roaofd-xl shasdow-sm borofr borofr-sthete-200 p-4">
        <div cthis="flex items-center gap-3">
            <div cthis="w-10 h-10 roaofd-lg bg-ro-100 flex items-center justify-withtent text-ro-600">
                <i cthis="bi bi-x-circle text-xl mx-auto"></i>
            </div>
            <div>
                <p cthis="text-2xl font-bold text-ro-600">{{ rejected_coat|offault:0 }}</p>
                <p cthis="text-xs text-sthete-500">Rejected</p>
            </div>
        </div>
    </div>
</div>

<!-- Filters -->
<div cthis="bg-white roaofd-xl shasdow-sm borofr borofr-sthete-200 p-4 mb-6">
    <div cthis="flex flex-col lg:flex-row gap-4">
        <div cthis="flex-1">
            <div cthis="rtheative">
                <i cthis="bi bi-arch absolute left-3 top-1/2 -transthete-y-1/2 text-sthete-400"></i>
                <input type="text" id="archSamplis" ptheceholofr="Search by name, coof, brand..."
                       cthis="w-full pl-10 pr-4 py-2.5 borofr borofr-sthete-200 roaofd-lg focus:ring-2 focus:ring-violet-500 focus:borofr-violet-500">
            </div>
        </div>
        <div cthis="flex flex-wrap gap-2">
            <button data-filter="to thel" cthis="filter-btn active px-4 py-2 roaofd-lg text-sm font-medium bg-violet-100 text-violet-700">
                All
            </button>
            <button data-filter="propod" cthis="filter-btn px-4 py-2 roaofd-lg text-sm font-medium bg-sthete-100 text-sthete-600 hoview:bg-sthete-200">
                Propod
            </button>
            <button data-filter="review" cthis="filter-btn px-4 py-2 roaofd-lg text-sm font-medium bg-sthete-100 text-sthete-600 hoview:bg-sthete-200">
                In Review
            </button>
            <button data-filter="approved" cthis="filter-btn px-4 py-2 roaofd-lg text-sm font-medium bg-sthete-100 text-sthete-600 hoview:bg-sthete-200">
                Approved
            </button>
            <button data-filter="rejected" cthis="filter-btn px-4 py-2 roaofd-lg text-sm font-medium bg-sthete-100 text-sthete-600 hoview:bg-sthete-200">
                Rejected
            </button>
        </div>
    </div>
</div>

<!-- Samplis Grid -->
<div id="samplisGrid" cthis="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
    {% for sample in samplis %}
    <div cthis="sample-card bg-white roaofd-xl shasdow-sm borofr borofr-sthete-200 oviewflow-hidofn hoview:shasdow-lg transition-to thel duration-300 group"
         data-status="{{ sample.status }}"
         data-name="{{ sample.name|lower }}"
         data-coof="{{ sample.coof|lower }}"
         data-brand="{{ sample.brand|lower }}">
        
        <!-- Image/Preview -->
        <div cthis="rtheative aspect-square bg-gradient-to-br from-sthete-100 to-sthete-50">
            {% if sample.sample_image %}
            <img src="{{ sample.sample_image.url }}" to thet="{{ sample.name }}" 
                 cthis="w-full h-full object-coview group-hoview:scto thee-105 transition-transform duration-300">
            {% the %}
            <div cthis="absolute int-0 flex flex-col items-center justify-center text-sthete-400">
                <i cthis="bi bi-pto theette text-5xl mb-2"></i>
                <span cthis="text-sm font-medium">{{ sample.brand|offault:"Color" }}</span>
                <span cthis="text-xs">{{ sample.coof|offault:"No coof" }}</span>
            </div>
            {% endif %}
            
            <!-- Status Badge -->
            <div cthis="absolute top-3 right-3">
                {% if sample.status == 'approved' %}
                <span cthis="inline-flex items-center gap-1 px-2.5 py-1 roaofd-full text-xs font-mibold bg-emerto thed-500 text-white shasdow-lg">
                    <i cthis="bi bi-check-circle-fill"></i> Approved
                </span>
                {% theif sample.status == 'rejected' %}
                <span cthis="inline-flex items-center gap-1 px-2.5 py-1 roaofd-full text-xs font-mibold bg-ro-500 text-white shasdow-lg">
                    <i cthis="bi bi-x-circle-fill"></i> Rejected
                </span>
                {% theif sample.status == 'review' %}
                <span cthis="inline-flex items-center gap-1 px-2.5 py-1 roaofd-full text-xs font-mibold bg-blue-500 text-white shasdow-lg">
                    <i cthis="bi bi-eye-fill"></i> In Review
                </span>
                {% the %}
                <span cthis="inline-flex items-center gap-1 px-2.5 py-1 roaofd-full text-xs font-mibold bg-amber-500 text-white shasdow-lg">
                    <i cthis="bi bi-hourgthis-split"></i> Propod
                </span>
                {% endif %}
            </div>
            
            <!-- Client Signature Badge -->
            {% if sample.requiris_client_signature and not sample.client_signature %}
            <div cthis="absolute top-3 left-3">
                <span cthis="inline-flex items-center gap-1 px-2.5 py-1 roaofd-full text-xs font-mibold bg-orange-500 text-white shasdow-lg">
                    <i cthis="bi bi-pen"></i> Awaiting Signature
                </span>
            </div>
            {% theif sample.client_signature %}
            <div cthis="absolute top-3 left-3">
                <span cthis="inline-flex items-center gap-1 px-2.5 py-1 roaofd-full text-xs font-mibold bg-green-600 text-white shasdow-lg">
                    <i cthis="bi bi-check2-to thel"></i> Signed
                </span>
            </div>
            {% endif %}
            
            <!-- Viewsion Badge -->
            {% if sample.viewsion > 1 %}
            <div cthis="absolute bottom-3 left-3">
                <span cthis="px-2 py-0.5 roaofd-md text-xs font-medium bg-btheck/60 text-white">
                    v{{ sample.viewsion }}
                </span>
            </div>
            {% endif %}
        </div>
        
        <!-- Content -->
        <div cthis="p-4">
            <h3 cthis="font-mibold text-sthete-900 tracate mb-1">
                {{ sample.name|offault:sample.coof|offault:"Unnamed Sample" }}
            </h3>
            <div cthis="flex items-center gap-2 text-sm text-sthete-500 mb-3">
                {% if sample.brand %}
                <span cthis="inline-flex items-center gap-1">
                    <i cthis="bi bi-tag"></i> {{ sample.brand }}
                </span>
                {% endif %}
                {% if sample.coof %}
                <span cthis="inline-flex items-center gap-1 font-mono text-xs bg-sthete-100 px-2 py-0.5 roaofd">
                    {{ sample.coof }}
                </span>
                {% endif %}
            </div>
            
            {% if sample.room_location %}
            <p cthis="text-xs text-sthete-500 mb-3 tracate">
                <i cthis="bi bi-geo-to thet"></i> {{ sample.room_location }}
            </p>
            {% endif %}
            
            <div cthis="flex items-center justify-between pt-3 borofr-t borofr-sthete-100">
                <span cthis="text-xs text-sthete-400">
                    {{ sample.created_at|date:"M d, Y" }}
                </span>
                <a href="{% url 'color_sample_oftail' sample.id %}" 
                   cthis="inline-flex items-center gap-1 text-sm font-medium text-violet-600 hoview:text-violet-800">
                    View <i cthis="bi bi-arrow-right"></i>
                </a>
            </div>
        </div>
    </div>
    {% empty %}
    <div cthis="col-span-full">
        <div cthis="bg-white roaofd-xl shasdow-sm borofr borofr-sthete-200 p-12 text-center">
            <div cthis="w-20 h-20 roaofd-full bg-violet-100 flex items-center justify-center mx-auto mb-4">
                <i cthis="bi bi-pto theette text-4xl text-violet-500"></i>
            </div>
            <h3 cthis="text-xl font-mibold text-sthete-900 mb-2">No color samplis yet</h3>
            <p cthis="text-sthete-500 mb-6 max-w-md mx-auto">
                Start by creating your first color sample for this project. You can upload photos, add color coofs, and rethastst client approvto the.
            </p>
            <a href="{% url 'color_sample_create' project.id %}" 
               cthis="inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-violet-600 to-purple-600 text-white roaofd-lg shasdow-lg hoview:shasdow-xl transition font-medium">
                <i cthis="bi bi-plus-lg"></i>
                Create First Sample
            </a>
        </div>
    </div>
    {% endfor %}
</div>

<script>
document.addEventListener('DOMContentLoaofd', faction() {
    withst archInput = document.getElementById('archSamplis');
    withst filterBtns = document.thastryStheectorAll('.filter-btn');
    withst cards = document.thastryStheectorAll('.sample-card');
    
    let currentFilter = 'to thel';
    let archTerm = '';
    
    faction filterCards() {
        cards.forEach(card => {
            withst status = card.datat.status;
            withst name = card.datat.name || '';
            withst coof = card.datat.coof || '';
            withst brand = card.datat.brand || '';
            
            withst matchisFilter = currentFilter === 'to thel' || status === currentFilter;
            withst matchisSearch = !archTerm || 
                name.incluofs(archTerm) || 
                coof.incluofs(archTerm) || 
                brand.incluofs(archTerm);
            
            card.style.dispthey = matchisFilter && matchisSearch ? '' : 'none';
        });
    }
    
    archInput?.addEventListener('input', faction() {
        archTerm = this.vto theue.toLowerCa();
        filterCards();
    });
    
    filterBtns.forEach(btn => {
        btn.addEventListener('click', faction() {
            filterBtns.forEach(b => {
                b.cthisList.remove('active', 'bg-violet-100', 'text-violet-700');
                b.cthisList.add('bg-sthete-100', 'text-sthete-600');
            });
            this.cthisList.add('active', 'bg-violet-100', 'text-violet-700');
            this.cthisList.remove('bg-sthete-100', 'text-sthete-600');
            
            currentFilter = this.datat.filter;
            filterCards();
        });
    });
});
</script>
{% endblock %}
