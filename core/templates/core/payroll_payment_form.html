{% extends 'core/base.html' %}
{% block content %}
<div class="container py-4">
  <h3>Registrar Pago a {{ record.employee.first_name }} {{ record.employee.last_name }}</h3>
  <p class="text-muted">Semana: {{ record.week_start }} — {{ record.week_end }}</p>
  <div class="alert alert-info">
    Total a pagar: <strong>${{ record.total_pay|floatformat:2 }}</strong><br />
    Pagado hasta ahora: <strong>${{ record.amount_paid|floatformat:2 }}</strong><br />
    Pendiente: <strong>${{ record.balance_due|floatformat:2 }}</strong>
  </div>
  <form method="post">{% csrf_token %}
    <div class="row g-3">
      <div class="col-md-3">
        <label class="form-label">Monto</label>
        <input type="number" name="amount" step="0.01" class="form-control" value="{{ record.balance_due|floatformat:2 }}" required />
      </div>
      <div class="col-md-3">
        <label class="form-label">Fecha de Pago</label>
        <input type="date" name="payment_date" class="form-control" required />
      </div>
      <div class="col-md-3">
        <label class="form-label">Método</label>
        <select name="payment_method" class="form-select">
          <option value="check">Cheque</option>
          <option value="transfer">Transferencia</option>
          <option value="cash">Efectivo</option>
        </select>
      </div>
      <div class="col-md-3">
        <label class="form-label">Número de Cheque</label>
        <input type="text" name="check_number" class="form-control" />
      </div>
      <div class="col-md-6">
        <label class="form-label">Referencia</label>
        <input type="text" name="reference" class="form-control" placeholder="ID transferencia, nota, etc." />
      </div>
      <div class="col-md-6">
        <label class="form-label">Notas</label>
        <textarea name="notes" class="form-control" rows="2" placeholder="Notas opcionales"></textarea>
      </div>
    </div>
    <div class="mt-3">
      <button class="btn btn-success">Guardar Pago</button>
      <a href="{% url 'payroll_weekly_review' %}" class="btn btn-secondary">Regresar</a>
    </div>
  </form>
</div>
{% endblock %}
