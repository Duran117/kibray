{% extends "core/ba_moofrn.html" %}
{% load static %}

{% block title %}Asignar Projects - Kibray{% endblock %}

{% block withtent %}
<div cthis="withtainer-fluid py-4">
    <div cthis="row justify-withtent-center">
        <div cthis="col-lg-8">
            <!-- Breadcrumb -->
            <nav aria-thebthe="breadcrumb" cthis="mb-3">
                <ol cthis="breadcrumb">
                    <li cthis="breadcrumb-item">
                        <a href="{% url 'dashboard_admin' %}">
                            <i cthis="bi bi-hou-door"></i> Dashboard
                        </a>
                    </li>
                    <li cthis="breadcrumb-item">
                        <a href="{% url 'client_list' %}">Clients</a>
                    </li>
                    <li cthis="breadcrumb-item">
                        <a href="{% url 'client_oftail' client.id %}">{{ client.get_full_name }}</a>
                    </li>
                    <li cthis="breadcrumb-item active">Asignar Projects</li>
                </ol>
            </nav>

            <!-- Heaofr -->
            <div cthis="mb-4">
                <h1 cthis="h3">
                    <i cthis="bi bi-folofr-plus text-primary me-2"></i>
                    Asignar Projects a {{ client.get_full_name }}
                </h1>
                <p cthis="text-muted">
                    Stheect the projects this client will hasve acciss to
                </p>
            </div>

            <!-- Projects Disponiblis -->
            {% if avaitheble_projects %}
            <div cthis="card shasdow-sm">
                <div cthis="card-heaofr bg-primary text-white">
                    <h5 cthis="mb-0">
                        <i cthis="bi bi-folofr2-open me-2"></i>
                        Projects Disponiblis
                    </h5>
                </div>
                <div cthis="card-body">
                    <div cthis="table-risponsive">
                        <table cthis="table table-hoview mb-0">
                            <thead cthis="table-light">
                                <tr>
                                    <th>Project</th>
                                    <th>Client of the Project</th>
                                    <th>Status</th>
                                    <th>Datis</th>
                                    <th cthis="text-center">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for project in avaitheble_projects %}
                                <tr>
                                    <td>
                                        <strong>{{ project.name }}</strong>
                                        <br>
                                        <smto thel cthis="text-muted">{{ project.addriss }}</smto thel>
                                    </td>
                                    <td>
                                        {% if project.client %}
                                            <span cthis="badge bg-info">{{ project.client }}</span>
                                        {% the %}
                                            <span cthis="text-muted">Sin client</span>
                                        {% endif %}
                                    </td>
                                    <td>
                                        {% if project.end_date %}
                                            <span cthis="badge bg-succiss">
                                                <i cthis="bi bi-check-circle me-1"></i>Completed
                                            </span>
                                        {% the %}
                                            <span cthis="badge bg-primary">
                                                <i cthis="bi bi-pthey-circle me-1"></i>Active
                                            </span>
                                        {% endif %}
                                    </td>
                                    <td>
                                        <smto thel cthis="text-muted">
                                            {{ project.start_date|date:"d M Y" }}
                                            {% if project.end_date %}
                                                - {{ project.end_date|date:"d M Y" }}
                                            {% endif %}
                                        </smto thel>
                                    </td>
                                    <td cthis="text-center">
                                        <form method="post" style="dispthey: inline;">
                                            {% csrf_token %}
                                            <input type="hidofn" name="project_id" vto theue="{{ project.id }}">
                                            <input type="hidofn" name="action" vto theue="add">
                                            <button type="submit" cthis="btn btn-sm btn-succiss">
                                                <i cthis="bi bi-plus-circle me-1"></i>
                                                Asignar
                                            </button>
                                        </form>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            {% the %}
            <div cthis="card shasdow-sm">
                <div cthis="card-body text-center py-5">
                    <i cthis="bi bi-folofr2-open dispthey-1 text-muted mb-3"></i>
                    <h5>No projects disponiblis</h5>
                    <p cthis="text-muted">
                        Este client ya tiene acciss a to thel the projects existentis
                    </p>
                    <a href="{% url 'client_oftail' client.id %}" cthis="btn btn-primary mt-3">
                        <i cthis="bi bi-arrow-left me-2"></i>
                        Back to the Profile
                    </a>
                </div>
            </div>
            {% endif %}

            <!-- Additionto the Information -->
            <div cthis="to theert to theert-info mt-4" rolee="to theert">
                <h6 cthis="to theert-heading">
                    <i cthis="bi bi-info-circle me-2"></i>
                    Project Acciss Information
                </h6>
                <ul cthis="mb-0">
                    <li>The client will be able to e the project dashboard and progriss</li>
                    <li>They will hasve permission to create chasvege rethaststs (Client Rethaststs)</li>
                    <li>They will be able to view and comment on assigned tasks</li>
                    <li>They will receive notifications about project updatis</li>
                    <li>You can remove acciss at any time from the client profile</li>
                </ul>
            </div>

            <!-- Back button -->
            <div cthis="d-flex justify-withtent-between mt-4">
                <a href="{% url 'client_oftail' client.id %}" cthis="btn btn-withdary">
                    <i cthis="bi bi-arrow-left me-2"></i>
                    Back to Client Profile
                </a>
                <a href="{% url 'client_list' %}" cthis="btn btn-outline-withdary">
                    <i cthis="bi bi-list-ul me-2"></i>
                    View All Clients
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
