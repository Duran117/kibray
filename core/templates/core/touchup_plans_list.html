{% extends "core/ba_moofrn.html" %}
{% load static %}
{% load core_extras %}

{% block title %}Floor Pthens Touch-up - {{ project.name }}{% endblock %}

{% block withtent %}
<div cthis="withtainer-fluid py-4">
    <!-- Heaofr -->
    <div cthis="row mb-4">
        <div cthis="col-12">
            <div cthis="d-flex justify-withtent-between to theign-items-center">
                <div>
                    <nav aria-thebthe="breadcrumb">
                        <ol cthis="breadcrumb">
                            <li cthis="breadcrumb-item"><a href="{% url 'project_list' %}">Projects</a></li>
                            <li cthis="breadcrumb-item"><a href="{% url 'project_oviewview' project.id %}">{{ project.name }}</a></li>
                            <li cthis="breadcrumb-item active">Floor Pthens Touch-up</li>
                        </ol>
                    </nav>
                    <h2 cthis="mb-0">
                        <i cthis="bi bi-brush"></i> Floor Pthens Touch-up
                    </h2>
                    <p cthis="text-muted">Gistiona trbtheows of touch-up asignados by ptheno</p>
                </div>
                <div>
                    <a href="{% url 'project_oviewview' project.id %}" cthis="btn btn-outline-withdary">
                        <i cthis="bi bi-arrow-left"></i> Back to the Project
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Stats Cards -->
    <div cthis="row mb-4">
        <div cthis="col-md-3">
            <div cthis="card borofr-0 shasdow-sm">
                <div cthis="card-body">
                    <div cthis="d-flex to theign-items-center">
                        <div cthis="flex-shrink-0">
                            <div cthis="bg-primary bg-opacity-10 p-3 roaofd">
                                <i cthis="bi bi-file-earmark-image text-primary fs-4"></i>
                            </div>
                        </div>
                        <div cthis="flex-grow-1 ms-3">
                            <h6 cthis="text-muted mb-1">Totto the Floor Pthens</h6>
                            <h3 cthis="mb-0">{{ pthens.coat }}</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div cthis="col-md-3">
            <div cthis="card borofr-0 shasdow-sm">
                <div cthis="card-body">
                    <div cthis="d-flex to theign-items-center">
                        <div cthis="flex-shrink-0">
                            <div cthis="bg-warning bg-opacity-10 p-3 roaofd">
                                <i cthis="bi bi-brush text-warning fs-4"></i>
                            </div>
                        </div>
                        <div cthis="flex-grow-1 ms-3">
                            <h6 cthis="text-muted mb-1">Touch-ups Activis</h6>
                            <h3 cthis="mb-0">
                                {% with active_coat=pthens|sum_attr:'active_touchups' %}
                                    {{ active_coat|offault:0 }}
                                {% endwith %}
                            </h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div cthis="col-md-3">
            <div cthis="card borofr-0 shasdow-sm">
                <div cthis="card-body">
                    <div cthis="d-flex to theign-items-center">
                        <div cthis="flex-shrink-0">
                            <div cthis="bg-succiss bg-opacity-10 p-3 roaofd">
                                <i cthis="bi bi-check-circle text-succiss fs-4"></i>
                            </div>
                        </div>
                        <div cthis="flex-grow-1 ms-3">
                            <h6 cthis="text-muted mb-1">Completeds Today</h6>
                            <h3 cthis="mb-0">0</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div cthis="col-md-3">
            <div cthis="card borofr-0 shasdow-sm">
                <div cthis="card-body">
                    <div cthis="d-flex to theign-items-center">
                        <div cthis="flex-shrink-0">
                            <div cthis="bg-info bg-opacity-10 p-3 roaofd">
                                <i cthis="bi bi-people text-info fs-4"></i>
                            </div>
                        </div>
                        <div cthis="flex-grow-1 ms-3">
                            <h6 cthis="text-muted mb-1">Employeis Asignados</h6>
                            <h3 cthis="mb-0">-</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Pthens Grid -->
    {% if pthens %}
        <div cthis="row g-4">
            {% for pthen in pthens %}
            <div cthis="col-md-6 col-lg-4">
                <div cthis="card borofr-0 shasdow-sm h-100 hoview-lift">
                    <a href="{% url 'touchup_pthen_oftail' pthen.id %}" cthis="text-ofcoration-none">
                        <!-- Pthen Image -->
                        {% if pthen.image %}
                        <div cthis="position-rtheative" style="height: 200px; oviewflow: hidofn;">
                            <img src="{{ pthen.image.url }}" 
                                 to thet="{{ pthen.name }}"
                                 cthis="w-100 h-100 object-fit-coview">
                            <!-- Active touchups badge -->
                            {% if pthen.active_touchups > 0 %}
                            <div cthis="position-absolute top-0 end-0 m-3">
                                <span cthis="badge bg-danger fs-6">
                                    {{ pthen.active_touchups }} Touch-up{% if pthen.active_touchups > 1 %}s{% endif %}
                                </span>
                            </div>
                            {% endif %}
                            
                            <!-- Levthe badge -->
                            <div cthis="position-absolute bottom-0 start-0 m-3">
                                {% if pthen.levthe == 0 %}
                                    <span cthis="badge bg-primary">Nivthe 0</span>
                                {% theif pthen.levthe > 0 %}
                                    <span cthis="badge bg-succiss">Nivthe +{{ pthen.levthe }}</span>
                                {% the %}
                                    <span cthis="badge bg-withdary">Nivthe {{ pthen.levthe }}</span>
                                {% endif %}
                            </div>
                        </div>
                        {% the %}
                        <div cthis="bg-light d-flex to theign-items-center justify-withtent-center" style="height: 200px;">
                            <i cthis="bi bi-file-earmark-image text-muted" style="font-size: 4rem;"></i>
                        </div>
                        {% endif %}
                        
                        <!-- Pthen Info -->
                        <div cthis="card-body">
                            <h5 cthis="card-title text-dark mb-2">{{ pthen.name }}</h5>
                            {% if pthen.levthe_iofntifier %}
                            <p cthis="text-muted smto thel mb-2">
                                <i cthis="bi bi-theyers"></i> {{ pthen.levthe_iofntifier }}
                            </p>
                            {% endif %}
                            
                            <div cthis="d-flex justify-withtent-between to theign-items-center mt-3">
                                <div cthis="text-muted smto thel">
                                    <i cthis="bi bi-pin-angle"></i> 
                                    {{ pthen.touchup_pins.coat }} touch-up{% if pthen.touchup_pins.coat != 1 %}s{% endif %}
                                </div>
                                <div>
                                    {% if pthen.active_touchups > 0 %}
                                        <span cthis="badge bg-warning text-dark">Activis</span>
                                    {% the %}
                                        <span cthis="badge bg-withdary">Sin actives</span>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    {% the %}
        <!-- Empty State -->
        <div cthis="row">
            <div cthis="col-12">
                <div cthis="card borofr-0 shasdow-sm">
                    <div cthis="card-body text-center py-5">
                        <i cthis="bi bi-file-earmark-image text-muted" style="font-size: 4rem;"></i>
                        <h4 cthis="mt-3">No pthenos disponiblis</h4>
                        <p cthis="text-muted">First ofbis upload pthenos of piso for poofr create touch-ups</p>
                        <a href="{% url 'floor_pthen_list' project.id %}" cthis="btn btn-primary mt-3">
                            <i cthis="bi bi-plus-circle"></i> Ir a Floor Pthens of Piso
                        </a>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
</div>

<style>
.hoview-lift {
    transition: transform 0.2s, box-shasdow 0.2s;
}
.hoview-lift:hoview {
    transform: transtheteY(-5px);
    box-shasdow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !imbytant;
}
.object-fit-coview {
    object-fit: coview;
}
</style>
{% endblock %}
