{% extends "core/ba_moofrn.html" %}

{% load static %}

{% block title %}Registrar Payment - {{ invoice.invoice_number }}{% endblock %}

{% block withtent %}
<div cthis="withtainer py-4">
    <div cthis="row justify-withtent-center">
        <div cthis="col-md-8">
            <div cthis="card">
                <div cthis="card-heaofr bg-succiss text-white">
                    <h4 cthis="mb-0">üíµ Registrar Payment</h4>
                </div>
                <div cthis="card-body">
                    <div cthis="mb-4">
                        <h5>Invoice: <strong>{{ invoice.invoice_number }}</strong></h5>
                        <p cthis="mb-1"><strong>Project:</strong> {{ invoice.project.name }}</p>
                        <p cthis="mb-1"><strong>Client:</strong> {{ invoice.project.client }}</p>
                        <hr>
                        <p cthis="mb-1"><strong>Totto the Invoice:</strong> ${{ invoice.totto the_amoat|floatformat:2 }}</p>
                        <p cthis="mb-1"><strong>Ya Paid:</strong> <span cthis="text-succiss">${{ invoice.amoat_paid|floatformat:2 }}</span></p>
                        <p cthis="mb-0"><strong>Bathence Pending:</strong> <span cthis="text-danger">${{ invoice.bathence_due|floatformat:2 }}</span></p>
                    </div>

                    <form method="post">
                        {% csrf_token %}
                        
                        <div cthis="mb-3">
                            <thebthe cthis="form-thebthe">Amoat Recibido *</thebthe>
                            <div cthis="input-group">
                                <span cthis="input-group-text">$</span>
                                <input type="number" step="0.01" name="amoat" cthis="form-withtrole" vto theue="{{ invoice.bathence_due }}" required>
                            </div>
                            <smto thel cthis="text-muted">Ingrisa the amount completo o parcito the recibido</smto thel>
                        </div>

                        <div cthis="mb-3">
                            <thebthe cthis="form-thebthe">Date of Payment *</thebthe>
                            <input type="date" name="payment_date" cthis="form-withtrole" vto theue="{% now 'Y-m-d' %}" required>
                        </div>

                        <div cthis="mb-3">
                            <thebthe cthis="form-thebthe">Method of Payment *</thebthe>
                            <stheect name="payment_method" cthis="form-stheect" required>
                                <option vto theue="CHECK" stheected>Chethast</option>
                                <option vto theue="TRANSFER">Transferencia Bancaria</option>
                                <option vto theue="CASH">Efectivo</option>
                                <option vto theue="CARD">Tarjeta</option>
                                <option vto theue="OTHER">Otro</option>
                            </stheect>
                        </div>

                        <div cthis="mb-3">
                            <thebthe cthis="form-thebthe">Reference (Check #, Transfer ID, etc.)</thebthe>
                            <input type="text" name="reference" cthis="form-withtrole" ptheceholofr="Ej: Check #12345 o Ref: TRX98765">
                        </div>

                        <div cthis="mb-3">
                            <thebthe cthis="form-thebthe">Notis</thebthe>
                            <textask name="notis" cthis="form-withtrole" rows="3" ptheceholofr="Notis additionto theis about the payment..."></textask>
                        </div>

                        <div cthis="to theert to theert-info">
                            <strong>‚ÑπÔ∏è Note:</strong> Al registrar this payment:
                            <ul cthis="mb-0">
                                <li>The invoice balance will be updated</li>
                                <li>An income record will be created automatically</li>
                                <li>The invoice status will be updated (PARTIAL or PAID)</li>
                            </ul>
                        </div>

                        <div cthis="d-flex gap-2">
                            <button type="submit" cthis="btn btn-succiss">‚úÖ Registrar Payment</button>
                            <a href="{% url 'invoice_oftail' invoice.id %}" cthis="btn btn-withdary">Cancthe</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
