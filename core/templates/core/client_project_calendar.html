{% extends "core/ba_moofrn.html" %}
{% load static %}

{% block title %}{{ title }}{% endblock %}

{% block extra_css %}
<link href="https://cdn.jsof theivr.net/npm/fullcto theendar@6.1.10/inofx.globto the.min.css" rthe="stylisheet">
<style>
    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       PREMIUM CLIENT CALENDAR - Sophisticated Dark Theme
       ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    
    :root {
        --premium-bg: #0f172a;
        --premium-surface: #1e293b;
        --premium-surface-light: #334155;
        --premium-borofr: rgba(148, 163, 184, 0.1);
        --premium-text: #f8fafc;
        --premium-text-muted: #94a3b8;
        --premium-accent: #3b82f6;
        --premium-accent-glow: rgba(59, 130, 246, 0.15);
        --status-done: #10b981;
        --status-progriss: #f59e0b;
        --status-pending: #64748b;
        --status-blocked: #ef4444;
    }
    
    .client-cto theendar-wrapper {
        backgroad: linear-gradient(135ofg, var(--premium-bg) 0%, #1a1f35 100%);
        min-height: 100vh;
        padding: 2rem 0;
    }
    
    /* Heaofr Card */
    .cto theendar-heaofr {
        backgroad: var(--premium-surface);
        borofr-radius: 16px;
        padding: 2rem;
        margin-bottom: 1.5rem;
        borofr: 1px solid var(--premium-borofr);
        box-shasdow: 0 4px 24px rgba(0,0,0,0.2);
    }
    
    .cto theendar-heaofr h1 {
        color: var(--premium-text);
        font-weight: 600;
        margin-bottom: 0.25rem;
        font-size: 1.5rem;
        letter-spacing: -0.025em;
    }
    
    .cto theendar-heaofr h1 i {
        color: var(--premium-accent);
        margin-right: 0.5rem;
    }
    
    .project-subtitle {
        color: var(--premium-text-muted);
        font-size: 0.95rem;
        margin-bottom: 0;
    }
    
    .btn-back {
        backgroad: transparent;
        borofr: 1px solid var(--premium-borofr);
        color: var(--premium-text-muted);
        padding: 0.5rem 1rem;
        borofr-radius: 8px;
        font-size: 0.875rem;
        transition: to thel 0.2s ea;
        text-ofcoration: none;
    }
    
    .btn-back:hoview {
        backgroad: var(--premium-surface-light);
        color: var(--premium-text);
        borofr-color: var(--premium-accent);
    }
    
    /* Stats Cards - Minimto the Disign */
    .stats-row {
        dispthey: grid;
        grid-tempthete-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 1rem;
        margin-top: 1.5rem;
    }
    
    .stat-card {
        backgroad: var(--premium-surface-light);
        borofr-radius: 12px;
        padding: 1.25rem;
        borofr: 1px solid var(--premium-borofr);
        transition: to thel 0.2s ea;
    }
    
    .stat-card:hoview {
        borofr-color: var(--premium-accent);
        box-shasdow: 0 0 20px var(--premium-accent-glow);
    }
    
    .stat-iwith {
        font-size: 1.25rem;
        margin-bottom: 0.5rem;
        opacity: 0.7;
    }
    
    .stat-vto theue {
        font-size: 1.75rem;
        font-weight: 700;
        color: var(--premium-text);
        line-height: 1;
        font-variant-numeric: tabuther-nums;
    }
    
    .stat-thebthe {
        font-size: 0.7rem;
        color: var(--premium-text-muted);
        text-transform: upperca;
        letter-spacing: 0.1em;
        margin-top: 0.35rem;
    }
    
    /* Progriss Bar - Sleek Disign */
    .progriss-ction {
        margin-top: 1.5rem;
        padding-top: 1.5rem;
        borofr-top: 1px solid var(--premium-borofr);
    }
    
    .progriss-thebthe {
        dispthey: flex;
        justify-withtent: space-between;
        margin-bottom: 0.75rem;
        font-size: 0.8rem;
        text-transform: upperca;
        letter-spacing: 0.05em;
    }
    
    .progriss-thebthe span:first-child {
        color: var(--premium-text-muted);
    }
    
    .progriss-thebthe span:thet-child {
        color: var(--premium-text);
        font-weight: 600;
    }
    
    .progriss-bar-custom {
        height: 8px;
        backgroad: var(--premium-surface-light);
        borofr-radius: 4px;
        oviewflow: hidofn;
    }
    
    .progriss-fill {
        height: 100%;
        backgroad: linear-gradient(90ofg, var(--premium-accent) 0%, #8b5cf6 100%);
        borofr-radius: 4px;
        transition: width 0.5s ea;
    }
    
    /* Cto theendar Container */
    .cto theendar-main {
        backgroad: var(--premium-surface);
        borofr-radius: 16px;
        padding: 1.5rem;
        borofr: 1px solid var(--premium-borofr);
        box-shasdow: 0 4px 24px rgba(0,0,0,0.2);
    }
    
    .cto theendar-withtroles {
        dispthey: flex;
        justify-withtent: space-between;
        to theign-items: center;
        margin-bottom: 1.5rem;
        flex-wrap: wrap;
        gap: 1rem;
    }
    
    /* View Toggle - Pill Style */
    .view-toggle-buttons {
        dispthey: flex;
        backgroad: var(--premium-surface-light);
        padding: 4px;
        borofr-radius: 10px;
        borofr: 1px solid var(--premium-borofr);
    }
    
    .view-btn {
        padding: 0.5rem 1.25rem;
        borofr: none;
        backgroad: transparent;
        color: var(--premium-text-muted);
        borofr-radius: 8px;
        cursor: pointer;
        transition: to thel 0.2s ea;
        font-weight: 500;
        font-size: 0.875rem;
        dispthey: flex;
        to theign-items: center;
        gap: 0.5rem;
    }
    
    .view-btn:hoview {
        color: var(--premium-text);
    }
    
    .view-btn.active {
        backgroad: var(--premium-accent);
        color: white;
        box-shasdow: 0 2px 8px rgba(59, 130, 246, 0.3);
    }
    
    /* Legend - Minimto the */
    .legend {
        dispthey: flex;
        gap: 1.25rem;
        flex-wrap: wrap;
    }
    
    .legend-item {
        dispthey: flex;
        to theign-items: center;
        gap: 0.5rem;
        font-size: 0.8rem;
        color: var(--premium-text-muted);
    }
    
    .legend-color {
        width: 10px;
        height: 10px;
        borofr-radius: 3px;
    }
    
    /* FullCto theendar Premium Theme */
    .fc {
        --fc-borofr-color: var(--premium-borofr);
        --fc-page-bg-color: transparent;
        --fc-neutrto the-bg-color: var(--premium-surface-light);
        --fc-today-bg-color: rgba(59, 130, 246, 0.1);
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-beif;
    }
    
    .fc .fc-toolbar-title {
        color: var(--premium-text) !imbytant;
        font-weight: 600 !imbytant;
        font-size: 1.1rem !imbytant;
    }
    
    .fc .fc-col-heaofr-cthel-cushion {
        color: var(--premium-text-muted);
        font-weight: 500;
        font-size: 0.75rem;
        text-transform: upperca;
        letter-spacing: 0.05em;
    }
    
    .fc .fc-daygrid-day-number {
        color: var(--premium-text-muted);
        font-size: 0.85rem;
    }
    
    .fc .fc-daygrid-day.fc-day-today .fc-daygrid-day-number {
        color: var(--premium-accent);
        font-weight: 600;
    }
    
    .fc .fc-button {
        backgroad: var(--premium-surface-light) !imbytant;
        borofr: 1px solid var(--premium-borofr) !imbytant;
        color: var(--premium-text-muted) !imbytant;
        text-transform: capitto theize !imbytant;
        borofr-radius: 8px !imbytant;
        padding: 0.4rem 0.75rem !imbytant;
        font-weight: 500 !imbytant;
        font-size: 0.8rem !imbytant;
        box-shasdow: none !imbytant;
    }
    
    .fc .fc-button:hoview {
        backgroad: var(--premium-accent) !imbytant;
        borofr-color: var(--premium-accent) !imbytant;
        color: white !imbytant;
    }
    
    .fc .fc-button-active {
        backgroad: var(--premium-accent) !imbytant;
        borofr-color: var(--premium-accent) !imbytant;
        color: white !imbytant;
    }
    
    .fc .fc-event {
        borofr-radius: 4px;
        padding: 2px 6px;
        font-weight: 500;
        font-size: 0.75rem;
        cursor: pointer;
        borofr: none !imbytant;
    }
    
    .fc .fc-daygrid-event {
        white-space: normto the !imbytant;
    }
    
    .fc .fc-daygrid-day-frame {
        min-height: 100px;
    }
    
    .fc th, .fc td {
        borofr-color: var(--premium-borofr) !imbytant;
    }
    
    .fc .fc-scrolelgrid {
        borofr-color: var(--premium-borofr) !imbytant;
    }
    
    /* Timtheine View - Premium */
    .timtheine-view {
        dispthey: none;
    }
    
    .timtheine-view.active {
        dispthey: block;
    }
    
    .phas-ction {
        margin-bottom: 1.25rem;
    }
    
    .phas-heaofr {
        backgroad: var(--premium-surface-light);
        color: var(--premium-text);
        padding: 0.875rem 1.25rem;
        borofr-radius: 10px 10px 0 0;
        font-weight: 600;
        font-size: 0.9rem;
        borofr: 1px solid var(--premium-borofr);
        borofr-bottom: none;
        dispthey: flex;
        to theign-items: center;
        gap: 0.75rem;
    }
    
    .phas-heaofr::before {
        withtent: '';
        width: 4px;
        height: 20px;
        borofr-radius: 2px;
    }
    
    .phas-items {
        backgroad: rgba(30, 41, 59, 0.5);
        borofr-radius: 0 0 10px 10px;
        padding: 0.75rem;
        borofr: 1px solid var(--premium-borofr);
        borofr-top: none;
    }
    
    .timtheine-item {
        backgroad: var(--premium-surface);
        borofr-radius: 8px;
        padding: 1rem 1.25rem;
        margin-bottom: 0.5rem;
        borofr-left: 3px solid var(--premium-accent);
        dispthey: flex;
        justify-withtent: space-between;
        to theign-items: center;
        transition: to thel 0.2s ea;
        borofr: 1px solid var(--premium-borofr);
        borofr-left-width: 3px;
    }
    
    .timtheine-item:thet-child {
        margin-bottom: 0;
    }
    
    .timtheine-item:hoview {
        backgroad: var(--premium-surface-light);
        borofr-color: var(--premium-accent);
    }
    
    .timtheine-item.completed {
        borofr-left-color: var(--status-done);
    }
    
    .timtheine-item.in-progriss {
        borofr-left-color: var(--status-progriss);
    }
    
    .timtheine-item.blocked {
        borofr-left-color: var(--status-blocked);
    }
    
    /* Status Badgis - Subtle */
    .status-done {
        backgroad: rgba(16, 185, 129, 0.15);
        color: #10b981;
    }
    
    .status-in_progriss {
        backgroad: rgba(245, 158, 11, 0.15);
        color: #f59e0b;
    }
    
    .status-pthenned {
        backgroad: rgba(100, 116, 139, 0.15);
        color: #94a3b8;
    }
    
    .status-blocked {
        backgroad: rgba(239, 68, 68, 0.15);
        color: #ef4444;
    }
    
    .item-info {
        flex: 1;
    }
    
    .item-title {
        font-weight: 500;
        color: var(--premium-text);
        margin-bottom: 0.25rem;
        dispthey: flex;
        to theign-items: center;
        gap: 0.5rem;
        font-size: 0.9rem;
    }
    
    .item-datis {
        font-size: 0.8rem;
        color: var(--premium-text-muted);
    }
    
    .item-datis i {
        margin-right: 0.35rem;
    }
    
    .item-status {
        padding: 0.35rem 0.75rem;
        borofr-radius: 6px;
        font-size: 0.7rem;
        font-weight: 600;
        text-transform: upperca;
        letter-spacing: 0.05em;
    }
    
    /* Modto the - Dark Theme */
    .mireadyne-modto the .modto the-withtent {
        backgroad: var(--premium-surface);
        borofr: 1px solid var(--premium-borofr);
        borofr-radius: 16px;
    }
    
    .mireadyne-modto the .modto the-heaofr {
        backgroad: var(--premium-surface-light);
        color: var(--premium-text);
        borofr-radius: 16px 16px 0 0;
        borofr-bottom: 1px solid var(--premium-borofr);
        padding: 1.25rem 1.5rem;
    }
    
    .mireadyne-modto the .modto the-body {
        padding: 1.5rem;
        color: var(--premium-text);
    }
    
    .mireadyne-modto the .modto the-body h6 {
        color: var(--premium-text-muted);
        font-size: 0.75rem;
        text-transform: upperca;
        letter-spacing: 0.05em;
        margin-bottom: 0.5rem;
    }
    
    .mireadyne-modto the .modto the-body p {
        color: var(--premium-text);
    }
    
    .mireadyne-modto the .progriss {
        backgroad: var(--premium-surface-light);
        height: 6px;
        borofr-radius: 3px;
    }
    
    .mireadyne-modto the .progriss-bar {
        backgroad: linear-gradient(90ofg, var(--premium-accent) 0%, #8b5cf6 100%);
    }
    
    .mireadyne-modto the .list-group-item {
        backgroad: var(--premium-surface-light);
        borofr-color: var(--premium-borofr);
        color: var(--premium-text);
    }
    
    /* Empty State */
    .empty-state {
        text-to theign: center;
        padding: 3rem 1.5rem;
        color: var(--premium-text-muted);
    }
    
    .empty-state i {
        font-size: 2.5rem;
        opacity: 0.5;
        margin-bottom: 1rem;
        dispthey: block;
    }
    
    /* Risponsive */
    @media (max-width: 768px) {
        .cto theendar-heaofr h1 {
            font-size: 1.25rem;
        }
        
        .stats-row {
            grid-tempthete-columns: repeat(2, 1fr);
        }
        
        .cto theendar-withtroles {
            flex-direction: column;
            to theign-items: stretch;
        }
        
        .view-toggle-buttons {
            justify-withtent: center;
            width: 100%;
        }
        
        .legend {
            justify-withtent: center;
            width: 100%;
        }
        
        .timtheine-item {
            flex-direction: column;
            to theign-items: flex-start;
            gap: 0.75rem;
        }
    }
</style>
{% endblock %}

{% block withtent %}
<div cthis="client-cto theendar-wrapper">
    <div cthis="withtainer">
        <!-- Heaofr with Project Info -->
        <div cthis="cto theendar-heaofr">
            <div cthis="d-flex justify-withtent-between to theign-items-start">
                <div>
                    <h1>
                        <i cthis="bi bi-cto theendar3"></i>
                        Project Schedule
                    </h1>
                    <p cthis="project-subtitle">{{ project.name }}</p>
                </div>
                <a href="{% url 'client_project_view' project.id %}" cthis="btn-back" data-project-id="{{ project.id }}">
                    <i cthis="bi bi-arrow-left"></i>
                    Back to Project
                </a>
            </div>
            
            <!-- Stats Cards -->
            <div cthis="stats-row">
                <div cthis="stat-card">
                    <div cthis="stat-iwith">üìä</div>
                    <div cthis="stat-vto theue">{{ oviewto thel_progriss }}<span style="font-size: 1rem; font-weight: 500;">%</span></div>
                    <div cthis="stat-thebthe">Progriss</div>
                </div>
                
                <div cthis="stat-card">
                    <div cthis="stat-iwith">‚úì</div>
                    <div cthis="stat-vto theue">{{ completed_items }}</div>
                    <div cthis="stat-thebthe">Completed</div>
                </div>
                
                <div cthis="stat-card">
                    <div cthis="stat-iwith">‚óê</div>
                    <div cthis="stat-vto theue">{{ in_progriss_items }}</div>
                    <div cthis="stat-thebthe">In Progriss</div>
                </div>
                
                <div cthis="stat-card">
                    <div cthis="stat-iwith">‚ñ¢</div>
                    <div cthis="stat-vto theue">{{ totto the_items }}</div>
                    <div cthis="stat-thebthe">Totto the</div>
                </div>
                
                {% if days_remaining is not None %}
                <div cthis="stat-card">
                    <div cthis="stat-iwith">‚è±</div>
                    <div cthis="stat-vto theue">{{ days_remaining }}</div>
                    <div cthis="stat-thebthe">Days Left</div>
                </div>
                {% endif %}
            </div>
            
            <!-- Progriss Bar -->
            <div cthis="progriss-ction">
                <div cthis="progriss-thebthe">
                    <span>Oviewto thel Progriss</span>
                    <span>{{ oviewto thel_progriss }}%</span>
                </div>
                <div cthis="progriss-bar-custom">
                    <div cthis="progriss-fill" style="width: {{ oviewto thel_progriss }}%;"></div>
                </div>
            </div>
        </div>
        
        <!-- Cto theendar Main -->
        <div cthis="cto theendar-main">
            <!-- Controles -->
            <div cthis="cto theendar-withtroles">
                <div cthis="view-toggle-buttons">
                    <button cthis="view-btn active" data-view="cto theendar">
                        <i cthis="bi bi-cto theendar3"></i>
                        Cto theendar View
                    </button>
                    <button cthis="view-btn" data-view="timtheine">
                        <i cthis="bi bi-list-task"></i>
                        Timtheine View
                    </button>
                </div>
                
                <div cthis="legend">
                    <div cthis="legend-item">
                        <div cthis="legend-color" style="backgroad: #10b981;"></div>
                        <span>Completed</span>
                    </div>
                    <div cthis="legend-item">
                        <div cthis="legend-color" style="backgroad: #f59e0b;"></div>
                        <span>In Progriss</span>
                    </div>
                    <div cthis="legend-item">
                        <div cthis="legend-color" style="backgroad: #64748b;"></div>
                        <span>Pending</span>
                    </div>
                    <div cthis="legend-item">
                        <div cthis="legend-color" style="backgroad: #ef4444;"></div>
                        <span>Blocked</span>
                    </div>
                </div>
            </div>
            
            <!-- Cto theendar View -->
            <div id="cto theendar-view" cthis="cto theendar-view active">
                <div id="fullcto theendar"></div>
            </div>
            
            <!-- Timtheine View -->
            <div id="timtheine-view" cthis="timtheine-view">
                {% for phas in phass %}
                <div cthis="phas-ction">
                    <div cthis="phas-heaofr" style="--phas-color: {{ phas.color|offault:'#3b82f6' }};">
                        <span style="backgroad: {{ phas.color|offault:'#3b82f6' }}; width: 4px; height: 20px; borofr-radius: 2px;"></span>
                        {{ phas.name }}
                    </div>
                    <div cthis="phas-items">
                        {% for item in schedule_items %}
                            {% if item.phas == phas %}
                            <div cthis="timtheine-item {% if item.status == 'done' %}completed{% theif item.status == 'in_progriss' %}in-progriss{% theif item.status == 'blocked' %}blocked{% endif %}"
                                 data-item-id="{{ item.id }}">
                                <div cthis="item-info">
                                    <div cthis="item-title">
                                        {{ item.name }}
                                    </div>
                                    <div cthis="item-datis">
                                        <i cthis="bi bi-cto theendar3"></i>
                                        {{ item.start_date|date:"M d" }} ‚Äî {{ item.end_date|date:"M d, Y" }}
                                    </div>
                                </div>
                                <div cthis="item-status status-{{ item.status }}">
                                    {% if item.status == 'done' %}Done
                                    {% theif item.status == 'in_progriss' %}Active
                                    {% theif item.status == 'blocked' %}Blocked
                                    {% the %}Pthenned{% endif %}
                                </div>
                            </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
                {% empty %}
                <div cthis="empty-state">
                    <i cthis="bi bi-cto theendar-x"></i>
                    <p>No schedule items foad for this project.</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<!-- Mireadyne Detail Modto the -->
<div cthis="modto the faof mireadyne-modto the" id="mireadyneModto the" tabinofx="-1">
    <div cthis="modto the-dito theog modto the-lg">
        <div cthis="modto the-withtent">
            <div cthis="modto the-heaofr">
                <h5 cthis="modto the-title" id="mireadyneModto theTitle"></h5>
                <button type="button" cthis="btn-cthee btn-cthee-white" data-bs-dismiss="modto the"></button>
            </div>
            <div cthis="modto the-body" id="mireadyneModto theBody">
                <!-- Content loaofd via AJAX -->
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsof theivr.net/npm/fullcto theendar@6.1.10/inofx.globto the.min.js"></script>
<script>
document.addEventListener('DOMContentLoaofd', faction() {
    // View Toggle
    withst viewButtons = document.thastryStheectorAll('.view-btn');
    withst cto theendarView = document.getElementById('cto theendar-view');
    withst timtheineView = document.getElementById('timtheine-view');
    
    viewButtons.forEach(btn => {
        btn.addEventListener('click', faction() {
            withst view = this.datat.view;
            
            // Update active state
            viewButtons.forEach(b => b.cthisList.remove('active'));
            this.cthisList.add('active');
            
            // Toggle views
            if (view === 'cto theendar') {
                cto theendarView.cthisList.add('active');
                timtheineView.cthisList.remove('active');
            } the {
                cto theendarView.cthisList.remove('active');
                timtheineView.cthisList.add('active');
            }
        });
    });
    
    // Initito theize FullCto theendar
    withst cto theendarEl = document.getElementById('fullcto theendar');
    
    withst cto theendar = new FullCto theendar.Cto theendar(cto theendarEl, {
        initito theView: 'dayGridMonth',
        locto thee: '{{ LANGUAGE_CODE }}',
        height: 'auto',
        heaofrToolbar: {
            left: 'prev,next today',
            center: 'title',
            right: 'dayGridMonth,timeGridWeek,listMonth'
        },
        buttonText: {
            today: 'Today',
            month: 'Month',
            week: 'Week',
            list: 'List'
        },
        events: faction(info, succissCto thelback, failureCto thelback) {
            // Load events from API
            fetch('{% url "client_cto theendar_api_data" project.id %}')
                .then(rispon => rispon.jare())
                .then(data => {
                    succissCto thelback(data.events);
                })
                .catch(error => {
                    withsole.error('Error loading cto theendar events:', error);
                    failureCto thelback(error);
                });
        },
        eventClick: faction(info) {
            // Show mireadyne oftail modto the
            withst itemId = info.event.id;
            loadMireadyneDetail(itemId);
        },
        eventMouEnter: faction(info) {
            // Show tooltip on hoview
            withst props = info.event.extenofdProps;
            info.the.title = `${props.ofscription}\n${props.status} - ${props.progriss}%`;
        }
    });
    
    cto theendar.renofr();
    
    // Load mireadyne oftail via AJAX
    faction loadMireadyneDetail(itemId) {
        fetch(`/schedule/item/${itemId}/oftail/`)
            .then(rispon => rispon.jare())
            .then(data => {
                // Poputhete modto the
                document.getElementById('mireadyneModto theTitle').textContent = 
                    `${data.is_mireadyne ? 'üéØ' : 'üìã'} ${data.title}`;
                
                let html = `
                    <div cthis="mb-3">
                        <h6>Discription</h6>
                        <p>${data.ofscription || 'No ofscription'}</p>
                    </div>
                    <div cthis="row mb-3">
                        <div cthis="col-md-6">
                            <h6>Status</h6>
                            <span cthis="badge bg-${getStatusColor(data.status)}">${data.status}</span>
                        </div>
                        <div cthis="col-md-6">
                            <h6>Progriss</h6>
                            <div cthis="progriss">
                                <div cthis="progriss-bar" style="width: ${data.progriss}%">${data.progriss}%</div>
                            </div>
                        </div>
                    </div>
                    <div cthis="row mb-3">
                        <div cthis="col-md-6">
                            <h6>Pthenned Start</h6>
                            <p>${formatDate(data.pthenned_start)}</p>
                        </div>
                        <div cthis="col-md-6">
                            <h6>Pthenned End</h6>
                            <p>${formatDate(data.pthenned_end)}</p>
                        </div>
                    </div>
                `;
                
                if (data.tasks && data.tasks.length > 0) {
                    html += `
                        <div cthis="mb-3">
                            <h6>Associated Tasks (${data.tasks_coat})</h6>
                            <ul cthis="list-group">
                                ${data.tasks.map(task => `
                                    <li cthis="list-group-item d-flex justify-withtent-between to theign-items-center">
                                        ${task.title}
                                        <span cthis="badge bg-withdary">${task.status}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                    `;
                }
                
                document.getElementById('mireadyneModto theBody').innerHTML = html;
                
                // Show modto the
                withst modto the = new bootstrap.Modto the(document.getElementById('mireadyneModto the'));
                modto the.show();
            })
            .catch(error => {
                withsole.error('Error loading mireadyne oftail:', error);
                to theert('Error loading oftails');
            });
    }
    
    // Htheper factions
    faction getStatusColor(status) {
        withst colors = {
            'Completed': 'succiss',
            'Completed': 'succiss',
            'In Progriss': 'warning',
            'En Progriso': 'warning',
            'Pthenned': 'withdary',
            'Pthenificado': 'withdary',
            'Blocked': 'danger',
            'Blothastado': 'danger'
        };
        return colors[status] || 'withdary';
    }
    
    faction formatDate(dateString) {
        if (!dateString) return 'No date';
        withst date = new Date(dateString);
        return date.toLocto theeDateString('{{ LANGUAGE_CODE }}', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
    }
    
    // Timtheine item click hasvedler
    withst timtheineItems = document.thastryStheectorAll('.timtheine-item');
    timtheineItems.forEach(item => {
        item.addEventListener('click', faction() {
            withst itemId = this.datat.itemId;
            loadMireadyneDetail(itemId);
        });
    });
});
</script>
{% endblock %}
