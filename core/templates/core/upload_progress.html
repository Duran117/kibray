{% extends "core/base_modern.html" %}
{% block content %}
<h3>Import Progress â€“ {{ project.name }}</h3>

<form method="post" enctype="multipart/form-data" class="mb-3">
  {% csrf_token %}
  <div class="d-flex gap-2 align-items-center mb-2">
    <input type="file" name="file" accept=".csv,text/csv" required />
    <label class="ms-2">
      <input type="checkbox" name="create_missing" />
      Crear BudgetLines faltantes
    </label>
    <button class="btn btn-primary btn-sm">Upload CSV</button>
    <a href="{% url 'project_ev' project.id %}" class="btn btn-secondary btn-sm">Back</a>
  <a href="{% url 'project_overview' project.id %}" class="btn btn-secondary btn-sm">Back</a>
    <a href="{% url 'download_progress_sample' project.id %}" class="btn btn-outline-info btn-sm">Download sample</a>
  </div>
</form>

{% if result %}
  <div class="alert alert-info">
    Created: {{ result.created }}, Updated: {{ result.updated }}, Skipped: {{ result.skipped }}
  </div>
{% endif %}

{% if errors %}
  <div class="alert alert-warning">
    <strong>Detalles:</strong>
    <ul>
      {% for e in errors %}<li>{{ e }}</li>{% endfor %}
    </ul>
  </div>
{% endif %}

<p>CSV esperado (UTF-8): project_id (opcional), cost_code, date, percent_complete, qty_completed, note</p>
{% endblock %}