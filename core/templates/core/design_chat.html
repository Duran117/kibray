{% extends 'core/base.html' %}
{% block content %}
<div class="container mt-3">
  <h2>Design Chat Â· {{ project.name }}</h2>
  <form method="post" enctype="multipart/form-data" class="mb-3">
    {% csrf_token %}
    <div class="input-group">
      <input type="text" name="message" class="form-control" placeholder="Escribe un mensaje...">
      <input type="file" name="image" class="form-control">
      <button class="btn btn-primary" type="submit">Enviar</button>
    </div>
  </form>
  <div class="list-group">
    {% for m in messages %}
    <div class="list-group-item">
      <div class="d-flex justify-content-between">
        <strong>{{ m.user.username|default:'Anon' }}</strong>
        <small class="text-muted">{{ m.created_at|date:'Y-m-d H:i' }}</small>
      </div>
      <div>{{ m.message }}</div>
      {% if m.image %}<img src="{{ m.image.url }}" class="img-fluid mt-2 rounded" style="max-height:200px; object-fit:contain;"/>{% endif %}
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}