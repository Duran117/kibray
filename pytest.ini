[pytest]
DJANGO_SETTINGS_MODULE = kibray_backend.settings
python_files = test_*.py *_tests.py
addopts = 
    -v
    --tb=short
    --strict-markers
    -k "not e2e"
    --asyncio-mode=auto
; Exclude e2e tests that require Playwright from collection
norecursedirs = tests/e2e e2e .git __pycache__ *.egg-info dist build

# Warnings management
filterwarnings =
    ignore::pytest.PytestReturnNotNoneWarning
    ignore::DeprecationWarning

# Async support for channels
asyncio_mode = auto

markers =
    unit: Unit tests (fast, isolated)
    integration: Integration tests (slower, DB access)
    api: API endpoint tests (REST framework)
    websocket: WebSocket consumer tests (Phase 6)
    slow: Slow running tests
    summary: Test suite summary documentation
    module_11: Tests for Module 11 (Tasks)
    module_12: Tests for Module 12 (Daily Plans)
    module_13: Tests for Module 13 (SOPs/Templates)
    module_28: Tests for Module 28 (Touch-Ups)
    module_29: Tests for Module 29 (Pre-Task Library)
    module_30: Tests for Module 30 (Weather)
    module_31: Tests for Module 31 (Digital Signatures)
    override_settings: Django settings override for tests
